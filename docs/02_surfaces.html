<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Constructing refining surfaces - Geologic Gridding Tutorial</title> <link rel="shortcut icon" href="/GeologicGriddingTutorial/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/GeologicGriddingTutorial/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/GeologicGriddingTutorial/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/GeologicGriddingTutorial/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Constructing refining surfaces | Geologic Gridding Tutorial</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Constructing refining surfaces" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/02_surfaces.html" /> <meta property="og:url" content="https://adamnicholasprice.github.io/GeologicGriddingTutorial/02_surfaces.html" /> <meta property="og:site_name" content="Geologic Gridding Tutorial" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Constructing refining surfaces" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Constructing refining surfaces","url":"https://adamnicholasprice.github.io/GeologicGriddingTutorial/02_surfaces.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/" class="site-title lh-tight"> Geologic Gridding Tutorial </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/01_intro.html" class="nav-list-link">Introduction</a><ul class="nav-list "></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/02_surfaces.html" class="nav-list-link active">Constructing refining surfaces</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/03_domain.html" class="nav-list-link">Constructing and refining domain</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/04_defineRegions.html" class="nav-list-link">Define regions and assign materials</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/05_cleanup.html" class="nav-list-link">Cleanup domain, materials, and boundary conditions</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/06_pseudoGeneral.html" class="nav-list-link">Pseudo code: General case</a></li><li class="nav-list-item"><a href="https://adamnicholasprice.github.io/GeologicGriddingTutorial/06_pseudoNorthPond.html" class="nav-list-link">Pseudo code: North Pond</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Geologic Gridding Tutorial" aria-label="Search Geologic Gridding Tutorial" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="surfaces"> <a href="#surfaces" class="anchor-heading" aria-labelledby="surfaces"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Surfaces </h1> <p>The first step in the construction of a simulation domain is to construct surfaces that represent geologically realistic layers. These surfaces will define boundaries that allow assignment of specific material properties and act as surfaces to refine the simulation domain. Surfaces can be constructed in LaGriT or in an outside programming language such as R, Python, or Matlab and brought into LaGritT. In both cases in this tutorial, surfaces were constructed outside of LaGriT and brought in to define mesh objects. The general steps to construct surfaces are:</p> <ol> <li> <p>Save mesh coordinates (x,y,z) into a .csv file</p> <ol> <li> <p>Create mesh object that has coordinate system (x and y) of desired mesh resolution (have to define if different from .csv file coordinates)</p> </li> <li> <p>Connect mesh objects with new coordinates in x and y.</p> </li> <li> <p>Read in the .csv as a mesh object into LaGriT</p> </li> <li> <p>Copy over z-coordinates from mesh in step 4 to connected mesh in step 2</p> </li> </ol> </li> </ol> <p>This process forces LaGriT to make the “best” connections within an x-y plane to begin with and then the coordinates along the z-axis with relief to be defined, thereby preventing any connections outside the plane.</p> <h2 id="generalized-mesh"> <a href="#generalized-mesh" class="anchor-heading" aria-labelledby="generalized-mesh"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generalized Mesh </h2> <p>For the general case, there is one control file (.lgi), one input file (<em>surface.lgi</em>), and four output surfaces.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>1_create_surface.lgi</em></td> <td><em>surface.csv</em></td> <td><em>1_surface_aq200.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>1_surface_aq800.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>1_surface_zero.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>1_surface.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>For the general case, <em>surface.csv</em> is a continuous function; \(z(x,y) = -cos(x) - cos(y)\) that replicates, but generalizes topography and structures observed in seafloor bathymetric data. The maxima of the function would be representative of seamounts, whereas the minima would represent sediment ponds, both common features on the seafloor. These relationships may be difficult to observe but they will become clear throughout the tutorial.</p> <h3 id="steps"> <a href="#steps" class="anchor-heading" aria-labelledby="steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Steps </h3> <p>First, navigate to the directory for the general case (i.e. GeologicGriddingData/GeneralLaGriT)</p> <p>Next, execute the .lgi file</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lagrit &lt; 1_create_surface.lgi
</code></pre></div></div> <h3 id="figures"> <a href="#figures" class="anchor-heading" aria-labelledby="figures"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Figures </h3> <script> var app = "https://kitware.github.io/paraview-glance/app"; var datadir = "https://raw.githubusercontent.com/adamnicholasprice/GeologicGriddingTutorial/main/GeneralScene/"; var file = "1_surface.vtkjs"; document.write("<iframe src='" + app + "?name=" + file + "&url=" +datadir + file + "' id='iframe' width='800' height='500'></iframe>"); </script> <h4 id="figure-1-interactive-figure-is-made-using-the-file-1_surfaceinp-in-a-program-called-kitware-glance-which-is-very-useful-for-sharing-and-visualizing-paraview-data-the-surface-is-outlined-by-the-eventual-domain-and-shows-the-extent-and-relief-of-our-initial-surface"> <a href="#figure-1-interactive-figure-is-made-using-the-file-1_surfaceinp-in-a-program-called-kitware-glance-which-is-very-useful-for-sharing-and-visualizing-paraview-data-the-surface-is-outlined-by-the-eventual-domain-and-shows-the-extent-and-relief-of-our-initial-surface" class="anchor-heading" aria-labelledby="figure-1-interactive-figure-is-made-using-the-file-1_surfaceinp-in-a-program-called-kitware-glance-which-is-very-useful-for-sharing-and-visualizing-paraview-data-the-surface-is-outlined-by-the-eventual-domain-and-shows-the-extent-and-relief-of-our-initial-surface"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Figure 1: Interactive figure is made using the file <em>1_surface.inp</em> in a program called <a href="https://kitware.github.io/glance/app/">Kitware Glance</a> which is very useful for sharing and visualizing Paraview data. The surface is outlined by the eventual domain and shows the extent and relief of our initial surface. </h4> <script> var app = "https://kitware.github.io/paraview-glance/app"; var datadir = "https://raw.githubusercontent.com/adamnicholasprice/GeologicGriddingTutorial/main/GeneralScene/"; var file = "1_surface_zero.vtkjs"; document.write("<iframe src='" + app + "?name=" + file + "&url=" +datadir + file + "' id='iframe' width='800' height='500'></iframe>"); </script> <h4 id="figure-2-all-the-surfaces-output-from-1_surfaceinp-surfaces-represent-the-upper-most-topography-layers-at-200-and-800m-below-surface-and-a-surface-at-0m-these-surfaces-will-surface-as-boundaries-for-refinement-as-well-as-assigning-materials-to-the-simulation-domain"> <a href="#figure-2-all-the-surfaces-output-from-1_surfaceinp-surfaces-represent-the-upper-most-topography-layers-at-200-and-800m-below-surface-and-a-surface-at-0m-these-surfaces-will-surface-as-boundaries-for-refinement-as-well-as-assigning-materials-to-the-simulation-domain" class="anchor-heading" aria-labelledby="figure-2-all-the-surfaces-output-from-1_surfaceinp-surfaces-represent-the-upper-most-topography-layers-at-200-and-800m-below-surface-and-a-surface-at-0m-these-surfaces-will-surface-as-boundaries-for-refinement-as-well-as-assigning-materials-to-the-simulation-domain"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Figure 2: All the surfaces output from <em>1_surface.inp</em>. Surfaces represent the upper most topography, layers at 200 and 800m below surface, and a surface at 0m. These surfaces will surface as boundaries for refinement as well as assigning materials to the simulation domain. </h4> <h2 id="north-pond"> <a href="#north-pond" class="anchor-heading" aria-labelledby="north-pond"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> North Pond </h2> <p>For the North Pond case, the first seven .lgi files define surfaces. The initial surface that represents the regional bathymetry of North Pond, was constructed outside of LaGriT in R. The details of sampling data for surface construction can be found in the supplemental information <a href="https://agupubs.onlinelibrary.wiley.com/action/downloadSupplement?doi=10.1029%2F2021JB023158&amp;file=2021JB023158-sup-0001-Supporting+Information+SI-S01.docx">Price et al., 2022</a>. From samples of bathymetric data surrounding North Pond, a continuous function that best describes the region is: \(z(x,y)= \frac{1}{t}\arctan\left (\frac{t*\sin(x)}{1-t*\cos(x)}\right) - \frac{1}{t}\arctan\left (\frac{t*\sin(y)}{1-t*\cos(y)}\right)\) where t determines the “tilt” of the function, x is the strike-normal distance, and y is the strike-parallel distance.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td>1_price_surf_domain.lgi</td> <td><em>function6.csv</em></td> <td><em>1_surf_domain.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-1"> <a href="#overview-1" class="anchor-heading" aria-labelledby="overview-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Create mesh object surface representing North Pond bathymetry using function6.csv</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>2_price_surf_mid_grid.lgi</em></td> <td><em>2_middle_grid.csv</em></td> <td><em>2_surf_mid_grid.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-2"> <a href="#overview-2" class="anchor-heading" aria-labelledby="overview-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Create mesh object surface from trimmed area of interest created from truncated bathymetric surface (<em>2_middle_grid.csv</em>) representing North Pond and immediately adjacent region.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>3_price_surf_mid_sb.lgi</em></td> <td><em>3_middle_sb.csv</em></td> <td><em>3_surf_mid_sb.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-3"> <a href="#overview-3" class="anchor-heading" aria-labelledby="overview-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Create mesh object surface from trimmed area of interest created from truncated bathymetric surface (<em>3_middle_sb.csv</em>) representing sediment / basement interface beneath North Pond.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>4_price_surf_flat_zero.lgi</em></td> <td><em>None</em></td> <td><em>4_surf_flat_zero.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-4"> <a href="#overview-4" class="anchor-heading" aria-labelledby="overview-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Construct a flat surface at z = 0 at the same spatial extent as <em>2_middle_grid.csv</em>.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>5_price_surf_aq100.lgi</em></td> <td><em>3_surf_mid_sb.inp</em></td> <td><em>5_surf_aq100.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-5"> <a href="#overview-5" class="anchor-heading" aria-labelledby="overview-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Construct a volume that represents a 100m thick aquifer section directly beneath North Pond.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td><em>6_price_surf_aq300_1k.lgi</em></td> <td><em>2_surf_mid_grid.inp</em></td> <td><em>6_surf_aq300_1k.inp</em></td> </tr> </tbody> </table></div> <h3 id="overview-6"> <a href="#overview-6" class="anchor-heading" aria-labelledby="overview-6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h3> <p>Construct a volume that represents a 900 m thick aquifer section directly beneath the region representing North Pond.</p> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Filename</strong></th> <th><strong>Input</strong></th> <th><strong>Output</strong></th> </tr> </thead> <tbody> <tr> <td>7_price_surf_filt.lgi</td> <td><em>1_surf_domain.inp</em></td> <td><em>7_surf_filt_aq100.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>7_surf_filt_aq300.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>7_surf_filt_aq600.inp</em></td> </tr> <tr> <td> </td> <td> </td> <td><em>7_surf_filt_aq1k.inp</em></td> </tr> </tbody> </table></div> <p><a href="http://adamnicholasprice.github.io/GeologicGriddingTutorial/01_intro.html" class="btn btn-purple">Introduction</a> <a href="http://adamnicholasprice.github.io/GeologicGriddingTutorial/03_domain.html" class="btn btn-purple">Constructing and refining domain</a></p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
